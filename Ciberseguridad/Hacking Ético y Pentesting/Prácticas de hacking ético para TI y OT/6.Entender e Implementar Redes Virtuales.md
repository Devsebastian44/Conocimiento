# Conceptos Fundamentales de Redes Virtuales

## ¿Qué es una Red Virtual?

Una **red virtual** es una red definida por software que permite la comunicación entre máquinas virtuales y recursos físicos, proporcionando las mismas funcionalidades que una red física pero con mayor flexibilidad y aislamiento.

## Ventajas de las Redes Virtuales:

- **Aislamiento**: Segmentación de tráfico
- **Flexibilidad**: Configuración dinámica
- **Escalabilidad**: Agregar/remover recursos fácilmente
- **Costo**: Reducción de hardware físico

# Tipos de Redes Virtuales:

## 1. Host-Only Network

```
[Host] ←→ [VM1] ←→ [VM2] ←→ [VM3]
       ↕
   [vSwitch]
```

Características:

- Comunicación entre host y VMs
- Aislamiento completo de red externa
- Ideal para laboratorios seguros

Configuración en VirtualBox:

```bash
# Crear red host-only
VBoxManage hostonlyif create
VBoxManage hostonlyif ipconfig vboxnet0 --ip 192.168.56.1
```

## 2. NAT Network

```
[Internet] ←→ [NAT Gateway] ←→ [VM1, VM2, VM3]
```

Características:

- Acceso a Internet desde VMs
- VMs no accesibles desde exterior
- Traducción de direcciones automática

Configuración:

```bash
# Crear red NAT
VBoxManage natnetwork add --netname natnet1 --network "10.0.2.0/24"
VBoxManage natnetwork start --netname natnet1
```

## 3. Bridged Network

```
[Physical Network] ←→ [Bridge] ←→ [VM1, VM2, VM3]
                              ↕
                          [Host NIC]
```

Características:

- VMs aparecen como dispositivos físicos en la red
- Acceso completo a recursos de red
- Potencialmente menos seguro

## 4. Internal Network

```
[VM1] ←→ [Internal Switch] ←→ [VM2] ←→ [VM3]
```

Características:

- Comunicación solo entre VMs
- Aislamiento completo del host y exterior
- Ideal para simulaciones de red

# Implementación de Topologías Complejas:

## Red Corporativa Simulada:

```
[Internet]
    ↓
[pfSense Firewall] (WAN: DHCP, LAN: 192.168.1.1/24)
    ↓
[Internal Switch]
    ├── [Domain Controller] (192.168.1.10)
    ├── [File Server] (192.168.1.20)
    ├── [Web Server] (192.168.1.30)
    └── [Workstations] (192.168.1.100-200)
```

## Red DMZ (Demilitarized Zone):

```
[Internet]
    ↓
[External Firewall]
    ↓
[DMZ] (10.0.1.0/24)
    ├── [Web Server] (10.0.1.10)
    ├── [Mail Server] (10.0.1.20)
    └── [DNS Server] (10.0.1.30)
    ↓
[Internal Firewall]
    ↓
[Internal Network] (192.168.1.0/24)
```

# Configuración Avanzada de Redes:

## VLAN (Virtual LANs):

```bash
# Configurar VLAN en Linux
sudo vconfig add eth0 10
sudo ifconfig eth0.10 192.168.10.1 netmask 255.255.255.0
```

## Tunneling:

```bash
# Crear túnel GRE
sudo ip tunnel add gre1 mode gre remote 10.0.1.1 local 10.0.1.2
sudo ip link set gre1 up
sudo ip addr add 192.168.100.1/24 dev gre1
```

## VPN Virtual:

```bash
# Configurar OpenVPN
sudo openvpn --config client.ovpn
```

# Herramientas de Gestión de Red:

## Wireshark para Análisis:

```bash
# Capturar tráfico
sudo tcpdump -i eth0 -w capture.pcap

# Analizar en Wireshark
wireshark capture.pcap
```

## Netcat para Testing:

```bash
# Servidor de escucha
nc -l -p 1234

# Cliente de conexión
nc 192.168.1.10 1234
```

## Nmap para Exploración:

```bash
# Escaneo de red
nmap -sn 192.168.1.0/24

# Escaneo detallado
nmap -sS -A 192.168.1.10
```

# Seguridad en Redes Virtuales:

## Microsegmentación:

- **Separación de servicios**: Cada servicio en su propia red
- **Políticas de firewall**: Reglas específicas por segmento
- **Monitoreo granular**: Visibilidad de cada segmento

## Implementación de Firewalls:

```bash
# pfSense - Configuración básica
# Interface: LAN
# IP: 192.168.1.1/24
# DHCP: 192.168.1.100-200

# Reglas de firewall
# Allow: HTTP/HTTPS outbound
# Block: All other traffic
```