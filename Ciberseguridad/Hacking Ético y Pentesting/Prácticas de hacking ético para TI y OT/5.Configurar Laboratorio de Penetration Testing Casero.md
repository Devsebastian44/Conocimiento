# Planificación del Laboratorio

## Objetivos del Laboratorio:

- **Práctica segura**: Entorno controlado para pruebas
- **Aprendizaje**: Experimentar con herramientas y técnicas
- **Desarrollo**: Crear y probar exploits
- **Certificación**: Preparación para exámenes

## Consideraciones de Hardware:

- **Presupuesto**: Determinar inversión disponible
- **Espacio**: Consideraciones físicas
- **Ruido**: Ventilación y ruido del equipo
- **Energía**: Consumo eléctrico

# Arquitectura del Laboratorio:

## Diseño Básico:

```
[Host Physical] 
├── [Kali Linux VM] (Atacante)
├── [Metasploitable VM] (Objetivo vulnerable)
├── [Windows VM] (Objetivo Windows)
└── [pfSense VM] (Firewall/Router)
```

## Diseño Avanzado:

```
[Host Physical]
├── [Management Network] (192.168.1.0/24)
├── [DMZ Network] (10.0.1.0/24)
│   ├── [Web Server VM]
│   └── [Mail Server VM]
├── [Internal Network] (10.0.2.0/24)
│   ├── [Domain Controller VM]
│   ├── [File Server VM]
│   └── [Workstation VMs]
└── [Isolated Network] (10.0.3.0/24)
    └── [Malware Analysis VM]
```

# Máquinas Virtuales Esenciales:

## Distribuciones de Pentesting:

- **Kali Linux**: Distribución principal de pentesting
- **Parrot Security OS**: Alternativa a Kali
- **BlackArch**: Distribución basada en Arch
- **Pentoo**: Distribución basada en Gentoo

## Objetivos Vulnerables:

- **Metasploitable 2/3**: VMs intencionalmente vulnerables
- **DVWA**: Damn Vulnerable Web Application
- **VulnHub VMs**: Colección de VMs vulnerables
- **HackTheBox**: Plataforma online de práctica

## Sistemas Operativos Objetivo:

- **Windows Server 2019/2022**: Entornos corporativos
- **Windows 10/11**: Estaciones de trabajo
- **Ubuntu Server**: Servidores Linux
- **CentOS/RHEL**: Servidores empresariales

# Configuración Paso a Paso:

## Paso 1: Preparación del Host

```bash
# Verificar recursos del sistema
free -h
df -h
lscpu

# Habilitar virtualización
# (Configurar en BIOS/UEFI)
```

## Paso 2: Instalación del Hipervisor

```bash
# Para VirtualBox en Ubuntu
sudo apt update
sudo apt install virtualbox virtualbox-ext-pack

# Para VMware Workstation
wget https://www.vmware.com/go/getworkstation-linux
chmod +x VMware-Workstation-*.bundle
sudo ./VMware-Workstation-*.bundle
```

## Paso 3: Configuración de Red Virtual

- **Host-Only Network**: Comunicación entre VMs y host
- **NAT Network**: Acceso a Internet con NAT
- **Bridged Network**: Conexión directa a red física
- **Internal Network**: Red aislada entre VMs

## Paso 4: Creación de VMs Base

```bash
# Configuración típica de VM
- RAM: 2-4GB por VM
- CPU: 2 cores por VM
- Disco: 20-40GB por VM
- Red: Múltiples interfaces según necesidad
```

# Herramientas de Automatización:

## Vagrant:

```bash
# Instalación de Vagrant
sudo apt install vagrant

# Ejemplo de Vagrantfile
Vagrant.configure("2") do |config|
  config.vm.box = "kalilinux/rolling"
  config.vm.network "private_network", ip: "192.168.56.10"
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "2048"
    vb.cpus = 2
  end
end
```

## Docker para Servicios:

```bash
# Instalar Docker
sudo apt install docker.io

# Ejecutar servicio vulnerable
docker run -d -p 8080:80 vulnerables/web-dvwa
```

# Gestión y Mantenimiento:

## Snapshots y Backups:

- **Snapshots antes de pruebas**: Puntos de restauración
- **Backups regulares**: Copias de seguridad completas
- **Versionado**: Mantener versiones anteriores

## Monitoreo y Logging:

- **Logs centralizados**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **Monitoreo de red**: Wireshark, tcpdump
- **Análisis de tráfico**: ntopng, Nagios